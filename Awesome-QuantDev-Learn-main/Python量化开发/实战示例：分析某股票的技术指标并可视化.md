## âœ… å®æˆ˜ç¤ºä¾‹ï¼šåˆ†ææŸè‚¡ç¥¨çš„æŠ€æœ¯æŒ‡æ ‡å¹¶å¯è§†åŒ–

### ğŸ§° ä½¿ç”¨åº“ï¼š

* `pandas`ï¼šå¤„ç†è¡¨æ ¼æ•°æ®
* `numpy`ï¼šæ•°å€¼è®¡ç®—
* `matplotlib`ï¼šå¯è§†åŒ–
* `talib`ï¼šæŠ€æœ¯æŒ‡æ ‡è®¡ç®—ï¼ˆå¦‚å®‰è£…æœ‰å›°éš¾å¯ä½¿ç”¨ pandas å®ç°æ›¿ä»£ç‰ˆæœ¬ï¼‰

---

### ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šåŠ è½½å¹¶é¢„å¤„ç†è‚¡ç¥¨æ•°æ®ï¼ˆç¤ºä¾‹ä¸ºCSVæ ¼å¼ï¼‰

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import talib

# è¯»å–æœ¬åœ°æˆ–ä¸‹è½½çš„æ—¥çº¿æ•°æ®
df = pd.read_csv('stock_data.csv')  # å‡è®¾æœ‰åˆ—ï¼šdate, open, high, low, close, volume
df['date'] = pd.to_datetime(df['date'])
df.set_index('date', inplace=True)
df = df.sort_index()

# æŸ¥çœ‹å‰å‡ è¡Œ
print(df.head())
```

---

### ğŸ“ˆ ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ NumPy å’Œ TA-Lib è®¡ç®—æŠ€æœ¯æŒ‡æ ‡

```python
# è®¡ç®—å¯¹æ•°æ”¶ç›Šç‡ï¼ˆNumPyï¼‰
df['log_return'] = np.log(df['close'] / df['close'].shift(1))

# ä½¿ç”¨ TA-Lib è®¡ç®—ç§»åŠ¨å¹³å‡çº¿
df['MA_20'] = talib.SMA(df['close'], timeperiod=20)
df['EMA_20'] = talib.EMA(df['close'], timeperiod=20)

# è®¡ç®—å¸ƒæ—å¸¦
upper, middle, lower = talib.BBANDS(df['close'], timeperiod=20)
df['BOLL_upper'] = upper
df['BOLL_middle'] = middle
df['BOLL_lower'] = lower

# RSI æŒ‡æ ‡
df['RSI'] = talib.RSI(df['close'], timeperiod=14)

# å»é™¤NAå€¼
df.dropna(inplace=True)
```

---

### ğŸ–¼ï¸ ç¬¬ä¸‰æ­¥ï¼šç»˜å›¾å¯è§†åŒ–ï¼ˆMatplotlibï¼‰

#### 1. æ”¶ç›˜ä»·ä¸å‡çº¿

```python
plt.figure(figsize=(14, 6))
plt.plot(df.index, df['close'], label='æ”¶ç›˜ä»·', linewidth=1.5)
plt.plot(df.index, df['MA_20'], label='20æ—¥å‡çº¿')
plt.plot(df.index, df['EMA_20'], label='20æ—¥EMA')
plt.title('æ”¶ç›˜ä»·ä¸å‡çº¿')
plt.xlabel('æ—¥æœŸ')
plt.ylabel('ä»·æ ¼')
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()
```

#### 2. å¸ƒæ—å¸¦

```python
plt.figure(figsize=(14, 6))
plt.plot(df.index, df['close'], label='æ”¶ç›˜ä»·')
plt.plot(df.index, df['BOLL_upper'], label='ä¸Šè½¨', linestyle='--', color='g')
plt.plot(df.index, df['BOLL_middle'], label='ä¸­è½¨', linestyle='-.')
plt.plot(df.index, df['BOLL_lower'], label='ä¸‹è½¨', linestyle='--', color='r')
plt.fill_between(df.index, df['BOLL_upper'], df['BOLL_lower'], color='lightgray', alpha=0.3)
plt.title('å¸ƒæ—å¸¦æŒ‡æ ‡')
plt.legend()
plt.grid(True)
plt.show()
```

#### 3. RSI æŒ‡æ ‡

```python
plt.figure(figsize=(14, 3))
plt.plot(df.index, df['RSI'], label='RSI(14)')
plt.axhline(70, color='r', linestyle='--', label='è¶…ä¹°çº¿')
plt.axhline(30, color='g', linestyle='--', label='è¶…å–çº¿')
plt.title('RSI æŒ‡æ ‡')
plt.legend()
plt.grid(True)
plt.show()
```

#### 4. æ—¥å¯¹æ•°æ”¶ç›Šç‡

```python
plt.figure(figsize=(14, 3))
plt.plot(df.index, df['log_return'], label='å¯¹æ•°æ”¶ç›Šç‡', color='purple')
plt.axhline(0, linestyle='--', color='black')
plt.title('æ—¥å¯¹æ•°æ”¶ç›Šç‡')
plt.grid(True)
plt.show()
```

---

### ğŸ“Š ç¬¬å››æ­¥ï¼šå°ç»“è¾“å‡ºæŒ‡æ ‡å€¼

```python
print("æœ€è¿‘5å¤©æŠ€æœ¯æŒ‡æ ‡é¢„è§ˆï¼š")
print(df[['close', 'MA_20', 'EMA_20', 'BOLL_upper', 'BOLL_lower', 'RSI']].tail())
```

---

### ğŸ§ª ç¤ºä¾‹æ•°æ®è·å–å»ºè®®ï¼š

* å¯ä½¿ç”¨ [TuShare](https://tushare.pro/) è·å–æ•°æ®å¹¶ä¿å­˜ä¸ºCSVï¼š

```python
import tushare as ts
ts.set_token('your_token')
pro = ts.pro_api()
df = pro.daily(ts_code='000001.SZ', start_date='20240101', end_date='20240601')
df.to_csv('stock_data.csv', index=False)
```




